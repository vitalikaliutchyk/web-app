<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á—ë—Ç–∞ —Ä–µ–º–æ–Ω—Ç–æ–≤ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π">
    <meta name="theme-color" content="#1a73e8">
    <title>–£—á—ë—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöó</text></svg>">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<header class="app-header">
    <div class="header-content">
        <h1>–£—á—ë—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</h1> 
        <div id="user-info" class="user-info hidden">
            <span id="user-email"></span>
            <button id="logout-btn" class="logout-btn">–í—ã—Ö–æ–¥</button>
        </div>
    </div>
</header>

<div id="auth-container">
    <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
    <div id="login-form" class="auth-form">
        <h2>–í—Ö–æ–¥</h2>
        <form id="loginForm">
            <label for="login-username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
            <input type="email" id="login-username" required placeholder="Email">
            
            <label for="login-password">–ü–∞—Ä–æ–ª—å</label>
            <input type="password" id="login-password" required>
            
            <button type="submit">–í–æ–π—Ç–∏</button>
            <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" id="show-register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
        </form>
    </div>

    <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="register-form" class="auth-form hidden">
        <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
        <form id="registerForm">
            <label for="register-username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
            <input type="email" id="register-username" required placeholder="Email">
            
            <label for="register-password">–ü–∞—Ä–æ–ª—å</label>
            <input type="password" id="register-password" required>
            
            <label for="register-confirm">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
            <input type="password" id="register-confirm" required>
            
            <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" id="show-login">–í–æ–π—Ç–∏</a></p>
        </form>
    </div>
</div>

<div id="app-content" class="hidden">
    <div class="container">
        <!-- –ë–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div class="stats">
            <div class="stat-item">
                <span>–ê–≤—Ç–æ —Å–µ–≥–æ–¥–Ω—è:</span>
                <span id="total-cars">0</span>
            </div>
            <div class="stat-item">
                <span>–ß–∞—Å—ã —Å–µ–≥–æ–¥–Ω—è:</span>
                <span id="total-hours">0.0</span>
            </div>
        </div>

        <form id="car-form">
            <label>
                –¢–∏–ø –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞:
                <select id="identifier-type">
                    <option value="reg">–ì–æ—Å. –Ω–æ–º–µ—Ä –†–ë (—Ñ–æ—Ä–º–∞—Ç: 1234 AB-1)</option>
                    <option value="vin">VIN (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Å–∏–º–≤–æ–ª–∞)</option>
                </select>
            </label>

            <label for="identifier-input">–í—ã–±–µ—Ä–∏—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:</label>
            <input type="text" id="identifier-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Å. –Ω–æ–º–µ—Ä –∏–ª–∏ VIN" required>

            <label for="hours">–ù–æ—Ä–º–æ-—á–∞—Å—ã:</label>
            <input type="number" id="hours" min="0" step="0.1" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ—Ä–º–∞-—á–∞—Å–æ–≤" required>

            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
        </form>

        <div id="table-container" class="hidden">
            <h2>–°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</h2>
            
            <!-- –ü–∞–Ω–µ–ª—å –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
            <div class="table-controls">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É..." />
                    <button id="search-btn" class="search-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                        </svg>
                    </button>
                </div>
                
                <div class="filter-controls">
                    <select id="sort-select">
                        <option value="timestamp-desc">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
                        <option value="timestamp-asc">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
                        <option value="identifier-asc">–ü–æ –Ω–æ–º–µ—Ä—É (–ê-–Ø)</option>
                        <option value="identifier-desc">–ü–æ –Ω–æ–º–µ—Ä—É (–Ø-–ê)</option>
                        <option value="hours-desc">–ü–æ —á–∞—Å–∞–º (–±–æ–ª—å—à–µ)</option>
                        <option value="hours-asc">–ü–æ —á–∞—Å–∞–º (–º–µ–Ω—å—à–µ)</option>
                    </select>
                    
                    <select id="date-filter">
                        <option value="all">–í—Å–µ –¥–∞—Ç—ã</option>
                        <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                        <option value="week">–ó–∞ –Ω–µ–¥–µ–ª—é</option>
                        <option value="month">–ó–∞ –º–µ—Å—è—Ü</option>
                    </select>
                </div>
            </div>
            
            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
            <div id="loading-indicator" class="loading-indicator hidden">
                <div class="spinner"></div>
                <span>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</span>
            </div>
            
            <table id="car-table">
                <thead>
                    <tr>
                        <th>–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä</th>
                        <th>–î–∞—Ç–∞</th>
                        <th>–ß–∞—Å—ã</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            
            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
            <div id="pagination" class="pagination hidden">
                <button id="prev-page" class="pagination-btn">‚Üê</button>
                <span id="page-info">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1</span>
                <button id="next-page" class="pagination-btn">‚Üí</button>
            </div>
        </div>

        <div id="saved-hours-container" class="hidden">
            <h2>–ò—Å—Ç–æ—Ä–∏—è –¥–Ω–µ–π</h2>
            <table id="saved-hours-table">
                <thead>
                    <tr>
                        <th>–î–∞—Ç–∞</th>
                        <th>–ê–≤—Ç–æ</th>
                        <th>–ß–∞—Å—ã</th>
                    </tr>
                </thead>
                <tbody id="saved-hours-table-body"></tbody>
            </table>
        </div>

        <div class="fab-container">
            <button class="fab-main" onclick="toggleFabMenu()" aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
                <svg class="icon-menu" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                </svg>
                <svg class="icon-close" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
            
            <div class="fab-menu hidden">
                <button class="fab-item" data-action="toggle-table">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M4 9h16v2H4zm0 4h10v2H4z"/>
                    </svg>
                    –¢–∞–±–ª–∏—Ü–∞
                </button>
                <button class="fab-item" data-action="toggle-history">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                    </svg>
                    –ò—Å—Ç–æ—Ä–∏—è
                </button>
                <button class="fab-item" data-action="export-csv">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-3 18c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4zm3-9V3.5L18.5 9H14z"/>
                    </svg>
                    –≠–∫—Å–ø–æ—Ä—Ç CSV
                </button>
                <button class="fab-item" data-action="export-json">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-2 16c-1.4 0-2.8-.5-3.9-1.3l1.4-1.4c.6.4 1.3.7 2.5.7 1 0 1.6-.3 1.6-.8 0-.4-.5-.7-1.3-1l-1.1-.5c-1.3-.5-2.1-1.4-2.1-2.6 0-1.6 1.4-2.6 3-2.6 1.2 0 2.1.3 2.7.6l-1.3 1.5c-.4-.2-.9-.4-1.4-.4-1 0-1.5.4-1.5.8 0 .4.5.7 1.3 1l1.1.5c1.4.6 2.1 1.5 2.1 2.7 0 1.7-1.3 2.7-3.2 2.7z"/>
                    </svg>
                    –≠–∫—Å–ø–æ—Ä—Ç JSON
                </button>
            </div>
        </div>
    </div>
</div>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<script src="config.js"></script>
<script src="script.js"></script>
</body>
</html>